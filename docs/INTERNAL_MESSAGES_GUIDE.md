# ğŸ“§ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Há»‡ Thá»‘ng ThÃ´ng BÃ¡o Ná»™i Bá»™

## ğŸ¯ Tá»•ng Quan

Há»‡ thá»‘ng thÃ´ng bÃ¡o ná»™i bá»™ cho phÃ©p **Super Admin** gá»­i thÃ´ng bÃ¡o realtime Ä‘áº¿n cÃ¡c **Admin** trong há»‡ thá»‘ng quáº£n lÃ½ buffet booking. Há»‡ thá»‘ng há»— trá»£ gá»­i thÃ´ng bÃ¡o cho nhiá»u ngÆ°á»i nháº­n, gá»­i broadcast, Ä‘Ã­nh kÃ¨m file vÃ  phÃ¢n loáº¡i theo má»©c Ä‘á»™ Æ°u tiÃªn.

## ğŸš€ CÃ¡ch Truy Cáº­p

### ğŸ”´ Super Admin - Gá»­i ThÃ´ng BÃ¡o

1. **ÄÄƒng nháº­p vÃ o Super Admin Panel**
   - URL: `http://localhost/buffet_booking_mvc/superadmin`
   - Sá»­ dá»¥ng tÃ i khoáº£n Super Admin

2. **Truy cáº­p menu Internal Messages**
   - Click vÃ o menu **"Internal Messages"** trong sidebar bÃªn trÃ¡i
   - Hoáº·c truy cáº­p trá»±c tiáº¿p: `http://localhost/buffet_booking_mvc/superadmin/internal-messages`

3. **Gá»­i thÃ´ng bÃ¡o má»›i**
   - Click nÃºt **"Gá»­i thÃ´ng bÃ¡o má»›i"** hoáº·c **"Soáº¡n thÃ´ng bÃ¡o"**
   - Äiá»n thÃ´ng tin:
     - **TiÃªu Ä‘á»**: TiÃªu Ä‘á» thÃ´ng bÃ¡o (báº¯t buá»™c)
     - **Loáº¡i thÃ´ng bÃ¡o**: Chá»n loáº¡i phÃ¹ há»£p
     - **Má»©c Ä‘á»™ Æ°u tiÃªn**: Tháº¥p/BÃ¬nh thÆ°á»ng/Cao/Kháº©n cáº¥p
     - **Ná»™i dung**: Ná»™i dung chi tiáº¿t (báº¯t buá»™c)
     - **File Ä‘Ã­nh kÃ¨m**: TÃ¹y chá»n (PDF, DOC, DOCX, TXT, JPG, PNG)
     - **NgÆ°á»i nháº­n**: Chá»n admin cá»¥ thá»ƒ hoáº·c "Gá»­i cho táº¥t cáº£ Admin"

4. **Xem thÃ´ng bÃ¡o Ä‘Ã£ gá»­i**
   - Click **"ThÃ´ng bÃ¡o Ä‘Ã£ gá»­i"** Ä‘á»ƒ xem danh sÃ¡ch
   - Xem chi tiáº¿t, thá»‘ng kÃª Ä‘á»c, xÃ³a thÃ´ng bÃ¡o

### ğŸ”µ Admin - Nháº­n ThÃ´ng BÃ¡o

1. **ÄÄƒng nháº­p vÃ o Admin Panel**
   - URL: `http://localhost/buffet_booking_mvc/admin`
   - Sá»­ dá»¥ng tÃ i khoáº£n Admin

2. **Truy cáº­p Internal Messages**
   - Click vÃ o menu **"Internal Messages"** trong sidebar
   - Badge Ä‘á» hiá»ƒn thá»‹ sá»‘ thÃ´ng bÃ¡o chÆ°a Ä‘á»c
   - Hoáº·c truy cáº­p: `http://localhost/buffet_booking_mvc/admin/internal-messages`

3. **Xem thÃ´ng bÃ¡o**
   - Danh sÃ¡ch thÃ´ng bÃ¡o Ä‘Ã£ nháº­n (má»›i nháº¥t trÆ°á»›c)
   - Click vÃ o thÃ´ng bÃ¡o Ä‘á»ƒ xem chi tiáº¿t
   - ThÃ´ng bÃ¡o tá»± Ä‘á»™ng Ä‘Ã¡nh dáº¥u Ä‘Ã£ Ä‘á»c khi xem

## ğŸ“‹ CÃ¡c Loáº¡i ThÃ´ng BÃ¡o

| Loáº¡i | MÃ´ táº£ | Badge |
|------|-------|-------|
| **ThÃ´ng bÃ¡o chung** | ThÃ´ng tin chung, cáº­p nháº­t | ğŸ”µ |
| **Cáº­p nháº­t há»‡ thá»‘ng** | Thay Ä‘á»•i tÃ­nh nÄƒng, báº£n cáº­p nháº­t | ğŸ”µ |
| **Thay Ä‘á»•i chÃ­nh sÃ¡ch** | Quy Ä‘á»‹nh má»›i, chÃ­nh sÃ¡ch | ğŸŸ¡ |
| **Báº£o trÃ¬** | Báº£o trÃ¬ há»‡ thá»‘ng, downtime | ğŸ”´ |
| **ThÃ´ng bÃ¡o cÃ¡ nhÃ¢n** | ThÃ´ng tin riÃªng tÆ° | ğŸŸ¢ |

## âš¡ Má»©c Äá»™ Æ¯u TiÃªn

| Má»©c Ä‘á»™ | MÃ´ táº£ | MÃ u sáº¯c |
|--------|-------|---------|
| **Tháº¥p** | ThÃ´ng tin tham kháº£o | XÃ¡m |
| **BÃ¬nh thÆ°á»ng** | ThÃ´ng bÃ¡o thÆ°á»ng | Xanh |
| **Cao** | Cáº§n chÃº Ã½ | Cam |
| **Kháº©n cáº¥p** | Cáº§n xá»­ lÃ½ ngay | Äá» |

## ğŸ“ TÃ­nh NÄƒng File ÄÃ­nh KÃ¨m

- **Äá»‹nh dáº¡ng há»— trá»£**: PDF, DOC, DOCX, TXT, JPG, PNG
- **KÃ­ch thÆ°á»›c tá»‘i Ä‘a**: 5MB
- **LÆ°u trá»¯**: `uploads/internal_messages/`
- **Táº£i xuá»‘ng**: Click vÃ o tÃªn file trong chi tiáº¿t thÃ´ng bÃ¡o

## ğŸ”§ TÃ­nh NÄƒng NÃ¢ng Cao

### Gá»­i Broadcast
- Chá»n **"Gá»­i cho táº¥t cáº£ Admin"** Ä‘á»ƒ gá»­i Ä‘áº¿n táº¥t cáº£ admin
- ThÃ´ng bÃ¡o sáº½ Ä‘Æ°á»£c gá»­i Ä‘áº¿n táº¥t cáº£ user cÃ³ role `manager` hoáº·c `super_admin`

### Thá»‘ng KÃª
- **Super Admin**: Xem sá»‘ ngÆ°á»i nháº­n, sá»‘ ngÆ°á»i Ä‘Ã£ Ä‘á»c
- **Admin**: Xem thá»i gian Ä‘Ã£ Ä‘á»c thÃ´ng bÃ¡o

### Quáº£n LÃ½
- **XÃ³a thÃ´ng bÃ¡o**: Chá»‰ ngÆ°á»i gá»­i má»›i cÃ³ thá»ƒ xÃ³a
- **Lá»‹ch sá»­**: LÆ°u trá»¯ Ä‘áº§y Ä‘á»§ lá»‹ch sá»­ gá»­i/nháº­n

## ğŸ› ï¸ CÃ i Äáº·t & Setup

### 1. Cháº¡y Migration
```bash
php scripts/setup_internal_messages.php
```

### 2. Kiá»ƒm tra Database
- Báº£ng `internal_messages`: LÆ°u thÃ´ng bÃ¡o
- Báº£ng `internal_message_recipients`: LÆ°u ngÆ°á»i nháº­n vÃ  tráº¡ng thÃ¡i Ä‘á»c

### 3. Test Chá»©c NÄƒng
```bash
php tests/internal_messages/test_internal_messages.php
```

## ğŸ“ Cáº¥u TrÃºc File

```
models/
â”œâ”€â”€ InternalMessage.php          # Model xá»­ lÃ½ database
controllers/
â”œâ”€â”€ InternalMessageController.php # Controller chÃ­nh
â”œâ”€â”€ SuperAdminController.php     # Controller Super Admin
â”œâ”€â”€ AdminController.php          # Controller Admin
views/
â”œâ”€â”€ superadmin/internal_messages/
â”‚   â”œâ”€â”€ send.php                 # Gá»­i thÃ´ng bÃ¡o
â”‚   â”œâ”€â”€ sent.php                 # Danh sÃ¡ch Ä‘Ã£ gá»­i
â”‚   â””â”€â”€ view.php                 # Xem chi tiáº¿t
â”œâ”€â”€ admin/internal_messages/
â”‚   â”œâ”€â”€ received.php             # Danh sÃ¡ch nháº­n
â”‚   â””â”€â”€ view.php                 # Xem chi tiáº¿t
uploads/
â””â”€â”€ internal_messages/           # ThÆ° má»¥c lÆ°u file
```

## ğŸ”’ Báº£o Máº­t

- **XÃ¡c thá»±c**: Chá»‰ user Ä‘Ã£ Ä‘Äƒng nháº­p má»›i truy cáº­p Ä‘Æ°á»£c
- **PhÃ¢n quyá»n**: Super Admin gá»­i, Admin nháº­n
- **CSRF Protection**: Token báº£o vá»‡ form
- **File Upload**: Kiá»ƒm tra Ä‘á»‹nh dáº¡ng vÃ  kÃ­ch thÆ°á»›c
- **SQL Injection**: Sá»­ dá»¥ng Prepared Statements

## ğŸ› Troubleshooting

### Lá»—i thÆ°á»ng gáº·p:

1. **KhÃ´ng tháº¥y menu Internal Messages**
   - Kiá»ƒm tra role user (pháº£i lÃ  super_admin hoáº·c manager)
   - Refresh cache browser

2. **KhÃ´ng gá»­i Ä‘Æ°á»£c thÃ´ng bÃ¡o**
   - Kiá»ƒm tra káº¿t ná»‘i database
   - Kiá»ƒm tra quyá»n ghi thÆ° má»¥c uploads

3. **File khÃ´ng upload Ä‘Æ°á»£c**
   - Kiá»ƒm tra kÃ­ch thÆ°á»›c file (tá»‘i Ä‘a 5MB)
   - Kiá»ƒm tra Ä‘á»‹nh dáº¡ng file Ä‘Æ°á»£c há»— trá»£

4. **ThÃ´ng bÃ¡o khÃ´ng hiá»ƒn thá»‹**
   - Kiá»ƒm tra báº£ng database Ä‘Ã£ Ä‘Æ°á»£c táº¡o
   - Cháº¡y láº¡i script setup

## ğŸ“ Há»— Trá»£

Náº¿u gáº·p váº¥n Ä‘á», vui lÃ²ng:
1. Kiá»ƒm tra log lá»—i trong `logs/`
2. Cháº¡y script test Ä‘á»ƒ debug
3. LiÃªn há»‡ developer Ä‘á»ƒ há»— trá»£

---

**ğŸ‰ ChÃºc báº¡n sá»­ dá»¥ng há»‡ thá»‘ng thÃ´ng bÃ¡o ná»™i bá»™ hiá»‡u quáº£!**
