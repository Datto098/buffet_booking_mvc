[13-Jun-2025 19:38:00 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:00 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"13:00","party_size":"6"}
[13-Jun-2025 19:38:00 UTC] BookingController - Extracted: date=2025-06-24, time=13:00, partySize=6
[13-Jun-2025 19:38:00 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:00 UTC] Booking Debug - Date: 2025-06-24, Time: 13:00, Party Size: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - DateTime: 2025-06-24 13:00
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 13:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:00 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:00 UTC] Booking Debug - Params: guests=6, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:00 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:00 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:00 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:38:03 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:03 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"13:00","party_size":"9"}
[13-Jun-2025 19:38:03 UTC] BookingController - Extracted: date=2025-06-24, time=13:00, partySize=9
[13-Jun-2025 19:38:03 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:03 UTC] Booking Debug - Date: 2025-06-24, Time: 13:00, Party Size: 9
[13-Jun-2025 19:38:03 UTC] Booking Debug - DateTime: 2025-06-24 13:00
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 13:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:03 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:03 UTC] Booking Debug - Params: guests=9, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:03 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:03 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:03 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:38:05 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:05 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"13:00","party_size":"1"}
[13-Jun-2025 19:38:05 UTC] BookingController - Extracted: date=2025-06-24, time=13:00, partySize=1
[13-Jun-2025 19:38:05 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:05 UTC] Booking Debug - Date: 2025-06-24, Time: 13:00, Party Size: 1
[13-Jun-2025 19:38:05 UTC] Booking Debug - DateTime: 2025-06-24 13:00
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 13:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:05 UTC] Booking Debug - Params: guests=1, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:05 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:38:08 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:08 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"13:00","party_size":"2"}
[13-Jun-2025 19:38:08 UTC] BookingController - Extracted: date=2025-06-24, time=13:00, partySize=2
[13-Jun-2025 19:38:08 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:08 UTC] Booking Debug - Date: 2025-06-24, Time: 13:00, Party Size: 2
[13-Jun-2025 19:38:08 UTC] Booking Debug - DateTime: 2025-06-24 13:00
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 13:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:08 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:08 UTC] Booking Debug - Params: guests=2, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:08 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:08 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:08 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:38:11 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:11 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"18:00","party_size":"2"}
[13-Jun-2025 19:38:11 UTC] BookingController - Extracted: date=2025-06-24, time=18:00, partySize=2
[13-Jun-2025 19:38:11 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:11 UTC] Booking Debug - Date: 2025-06-24, Time: 18:00, Party Size: 2
[13-Jun-2025 19:38:11 UTC] Booking Debug - DateTime: 2025-06-24 18:00
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 18:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:11 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:11 UTC] Booking Debug - Params: guests=2, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:11 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:11 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:11 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:38:13 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:38:13 UTC] BookingController - POST data: {"booking_date":"2025-06-24","booking_time":"18:00","party_size":"5"}
[13-Jun-2025 19:38:13 UTC] BookingController - Extracted: date=2025-06-24, time=18:00, partySize=5
[13-Jun-2025 19:38:13 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:38:13 UTC] Booking Debug - Date: 2025-06-24, Time: 18:00, Party Size: 5
[13-Jun-2025 19:38:13 UTC] Booking Debug - DateTime: 2025-06-24 18:00
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 18:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 11:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 11:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 12:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 12:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 13:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 13:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 14:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 14:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 17:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 17:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 18:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 18:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 19:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 19:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 20:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 20:30:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:38:13 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:38:13 UTC] Booking Debug - Params: guests=5, time=2025-06-24 21:00:00
[13-Jun-2025 19:38:13 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:38:13 UTC] SQL Error: 42S22
[13-Jun-2025 19:38:13 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:41:05 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:41:05 UTC] BookingController - POST data: {"booking_date":"2025-07-03","booking_time":"12:30","party_size":"7"}
[13-Jun-2025 19:41:05 UTC] BookingController - Extracted: date=2025-07-03, time=12:30, partySize=7
[13-Jun-2025 19:41:05 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:41:05 UTC] Booking Debug - Date: 2025-07-03, Time: 12:30, Party Size: 7
[13-Jun-2025 19:41:05 UTC] Booking Debug - DateTime: 2025-07-03 12:30
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 12:30
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 11:00:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 11:30:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 12:00:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 12:30:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 13:00:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 13:30:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 14:00:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 14:30:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:05 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:05 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:05 UTC] Booking Debug - Params: guests=7, time=2025-07-03 17:00:00
[13-Jun-2025 19:41:05 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:05 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 17:30:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 18:00:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 18:30:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 19:00:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 19:30:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 20:00:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 20:30:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:41:06 UTC] Booking Debug - SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    AND t.id NOT IN (
                        SELECT DISTINCT b.table_id
                        FROM bookings b
                        WHERE b.table_id IS NOT NULL
                        AND b.status IN ('confirmed', 'pending')
                        AND ABS(TIMESTAMPDIFF(MINUTE, b.booking_datetime, :reservation_time)) < 120
                    )
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:41:06 UTC] Booking Debug - Params: guests=7, time=2025-07-03 21:00:00
[13-Jun-2025 19:41:06 UTC] Error in getAvailableTables: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'b.booking_datetime' in 'where clause'
[13-Jun-2025 19:41:06 UTC] SQL Error: 42S22
[13-Jun-2025 19:41:06 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:44:18 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:44:18 UTC] BookingController - POST data: {"booking_date":"2025-07-03","booking_time":"12:00","party_size":"6"}
[13-Jun-2025 19:44:18 UTC] BookingController - Extracted: date=2025-07-03, time=12:00, partySize=6
[13-Jun-2025 19:44:18 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:44:18 UTC] Booking Debug - Date: 2025-07-03, Time: 12:00, Party Size: 6
[13-Jun-2025 19:44:18 UTC] Booking Debug - DateTime: 2025-07-03 12:00
[13-Jun-2025 19:44:18 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:18 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:18 UTC] Booking Debug - Params: guests=6
[13-Jun-2025 19:44:18 UTC] Booking Debug - Available tables found: 3
[13-Jun-2025 19:44:18 UTC] Booking Debug - First available table: capacity=10, number=D1
[13-Jun-2025 19:44:18 UTC] Booking Debug - Found 3 available tables
[13-Jun-2025 19:44:18 UTC] BookingController - Result from model: {"available":true,"message":"C\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y","suggestedTimes":[]}
[13-Jun-2025 19:44:21 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:44:21 UTC] BookingController - POST data: {"booking_date":"2025-07-03","booking_time":"17:00","party_size":"6"}
[13-Jun-2025 19:44:21 UTC] BookingController - Extracted: date=2025-07-03, time=17:00, partySize=6
[13-Jun-2025 19:44:21 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:44:21 UTC] Booking Debug - Date: 2025-07-03, Time: 17:00, Party Size: 6
[13-Jun-2025 19:44:21 UTC] Booking Debug - DateTime: 2025-07-03 17:00
[13-Jun-2025 19:44:21 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:21 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:21 UTC] Booking Debug - Params: guests=6
[13-Jun-2025 19:44:21 UTC] Booking Debug - Available tables found: 3
[13-Jun-2025 19:44:21 UTC] Booking Debug - First available table: capacity=10, number=D1
[13-Jun-2025 19:44:21 UTC] Booking Debug - Found 3 available tables
[13-Jun-2025 19:44:21 UTC] BookingController - Result from model: {"available":true,"message":"C\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y","suggestedTimes":[]}
[13-Jun-2025 19:44:22 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:44:22 UTC] BookingController - POST data: {"booking_date":"2025-07-03","booking_time":"17:00","party_size":"2"}
[13-Jun-2025 19:44:22 UTC] BookingController - Extracted: date=2025-07-03, time=17:00, partySize=2
[13-Jun-2025 19:44:22 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:44:22 UTC] Booking Debug - Date: 2025-07-03, Time: 17:00, Party Size: 2
[13-Jun-2025 19:44:22 UTC] Booking Debug - DateTime: 2025-07-03 17:00
[13-Jun-2025 19:44:22 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:22 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:22 UTC] Booking Debug - Params: guests=2
[13-Jun-2025 19:44:22 UTC] Booking Debug - Available tables found: 4
[13-Jun-2025 19:44:22 UTC] Booking Debug - First available table: capacity=5, number=TABLE_5
[13-Jun-2025 19:44:22 UTC] Booking Debug - Found 4 available tables
[13-Jun-2025 19:44:22 UTC] BookingController - Result from model: {"available":true,"message":"C\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y","suggestedTimes":[]}
[13-Jun-2025 19:44:24 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:44:24 UTC] BookingController - POST data: {"booking_date":"2025-07-03","booking_time":"17:00","party_size":"17"}
[13-Jun-2025 19:44:24 UTC] BookingController - Extracted: date=2025-07-03, time=17:00, partySize=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:44:24 UTC] Booking Debug - Date: 2025-07-03, Time: 17:00, Party Size: 17
[13-Jun-2025 19:44:24 UTC] Booking Debug - DateTime: 2025-07-03 17:00
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - No available tables found
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:44:24 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:44:24 UTC] Booking Debug - Params: guests=17
[13-Jun-2025 19:44:24 UTC] Booking Debug - Available tables found: 0
[13-Jun-2025 19:44:24 UTC] BookingController - Result from model: {"available":false,"message":"Kh\u00f4ng c\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y. Vui l\u00f2ng ch\u1ecdn th\u1eddi gian kh\u00e1c.","suggestedTimes":[]}
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Raw search: 
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Decoded search: 
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Search term length: 0
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Search term: 
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Raw search: empty
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Final where clause: f.is_available = 1
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - All params: []
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Category ID: 0
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Search term: 
[13-Jun-2025 19:44:58 UTC] Food Model Debug - SQL: SELECT f.*, c.name as category_name, sc.name as subcategory_name
                    FROM food_items f
                    LEFT JOIN categories c ON f.category_id = c.id
                    LEFT JOIN sub_categories sc ON f.subcategory_id = sc.id WHERE f.is_available = 1 ORDER BY f.name ASC LIMIT :limit OFFSET :offset
[13-Jun-2025 19:44:58 UTC] Food Model Debug - Params: []
[13-Jun-2025 19:44:58 UTC] Food Model Debug - Found 5 results
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - Test query found 5 foods
[13-Jun-2025 19:44:58 UTC] Menu Search Debug - First food name: Ba ch b M
[13-Jun-2025 19:44:58 UTC] Food Model Debug - SQL: SELECT f.*, c.name as category_name, sc.name as subcategory_name
                    FROM food_items f
                    LEFT JOIN categories c ON f.category_id = c.id
                    LEFT JOIN sub_categories sc ON f.subcategory_id = sc.id WHERE f.is_available = 1 ORDER BY f.name ASC LIMIT :limit OFFSET :offset
[13-Jun-2025 19:44:58 UTC] Food Model Debug - Params: []
[13-Jun-2025 19:44:58 UTC] Food Model Debug - Found 12 results
[13-Jun-2025 19:45:50 UTC] BookingController - checkAvailability called
[13-Jun-2025 19:45:50 UTC] BookingController - POST data: {"booking_date":"2025-06-25","booking_time":"12:30","party_size":"5"}
[13-Jun-2025 19:45:50 UTC] BookingController - Extracted: date=2025-06-25, time=12:30, partySize=5
[13-Jun-2025 19:45:50 UTC] Booking Debug - checkAvailability called
[13-Jun-2025 19:45:50 UTC] Booking Debug - Date: 2025-06-25, Time: 12:30, Party Size: 5
[13-Jun-2025 19:45:50 UTC] Booking Debug - DateTime: 2025-06-25 12:30
[13-Jun-2025 19:45:50 UTC] Booking Debug - Tables in database: 6
[13-Jun-2025 19:45:50 UTC] Booking Debug - Simplified SQL: SELECT t.*
                    FROM tables t
                    WHERE t.capacity >= :number_of_guests
                    AND t.is_available = 1
                    ORDER BY t.capacity, t.table_number
[13-Jun-2025 19:45:50 UTC] Booking Debug - Params: guests=5
[13-Jun-2025 19:45:50 UTC] Booking Debug - Available tables found: 4
[13-Jun-2025 19:45:50 UTC] Booking Debug - First available table: capacity=5, number=TABLE_5
[13-Jun-2025 19:45:50 UTC] Booking Debug - Found 4 available tables
[13-Jun-2025 19:45:50 UTC] BookingController - Result from model: {"available":true,"message":"C\u00f3 b\u00e0n tr\u1ed1ng cho th\u1eddi gian n\u00e0y","suggestedTimes":[]}
[13-Jun-2025 20:08:43 UTC] PHP Warning:  include(views/customer/auth/login.php): Failed to open stream: No such file or directory in C:\wamp64\www\buffet_booking_mvc\controllers\BaseController.php on line 17
[13-Jun-2025 20:08:43 UTC] PHP Stack trace:
[13-Jun-2025 20:08:43 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[13-Jun-2025 20:08:43 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'login']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[13-Jun-2025 20:08:43 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'login', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[13-Jun-2025 20:08:43 UTC] PHP   4. AuthController->login() C:\wamp64\www\buffet_booking_mvc\index.php:858
[13-Jun-2025 20:08:43 UTC] PHP   5. AuthController->showLoginForm() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:25
[13-Jun-2025 20:08:43 UTC] PHP   6. BaseController->loadView($view = 'customer/auth/login', $data = ['title' => 'ng Nhp - Buffet Booking']) C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:53
[13-Jun-2025 20:08:43 UTC] PHP Warning:  include(): Failed opening 'views/customer/auth/login.php' for inclusion (include_path='.;C:\php\pear') in C:\wamp64\www\buffet_booking_mvc\controllers\BaseController.php on line 17
[13-Jun-2025 20:08:43 UTC] PHP Stack trace:
[13-Jun-2025 20:08:43 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[13-Jun-2025 20:08:43 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'login']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[13-Jun-2025 20:08:43 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'login', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[13-Jun-2025 20:08:43 UTC] PHP   4. AuthController->login() C:\wamp64\www\buffet_booking_mvc\index.php:858
[13-Jun-2025 20:08:43 UTC] PHP   5. AuthController->showLoginForm() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:25
[13-Jun-2025 20:08:43 UTC] PHP   6. BaseController->loadView($view = 'customer/auth/login', $data = ['title' => 'ng Nhp - Buffet Booking']) C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:53
[13-Jun-2025 20:08:59 UTC] PHP Warning:  include(views/customer/auth/login.php): Failed to open stream: No such file or directory in C:\wamp64\www\buffet_booking_mvc\controllers\BaseController.php on line 17
[13-Jun-2025 20:08:59 UTC] PHP Stack trace:
[13-Jun-2025 20:08:59 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[13-Jun-2025 20:08:59 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'login']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[13-Jun-2025 20:08:59 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'login', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[13-Jun-2025 20:08:59 UTC] PHP   4. AuthController->login() C:\wamp64\www\buffet_booking_mvc\index.php:858
[13-Jun-2025 20:08:59 UTC] PHP   5. AuthController->showLoginForm() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:25
[13-Jun-2025 20:08:59 UTC] PHP   6. BaseController->loadView($view = 'customer/auth/login', $data = ['title' => 'ng Nhp - Buffet Booking']) C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:53
[13-Jun-2025 20:08:59 UTC] PHP Warning:  include(): Failed opening 'views/customer/auth/login.php' for inclusion (include_path='.;C:\php\pear') in C:\wamp64\www\buffet_booking_mvc\controllers\BaseController.php on line 17
[13-Jun-2025 20:08:59 UTC] PHP Stack trace:
[13-Jun-2025 20:08:59 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[13-Jun-2025 20:08:59 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'login']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[13-Jun-2025 20:08:59 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'login', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[13-Jun-2025 20:08:59 UTC] PHP   4. AuthController->login() C:\wamp64\www\buffet_booking_mvc\index.php:858
[13-Jun-2025 20:08:59 UTC] PHP   5. AuthController->showLoginForm() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:25
[13-Jun-2025 20:08:59 UTC] PHP   6. BaseController->loadView($view = 'customer/auth/login', $data = ['title' => 'ng Nhp - Buffet Booking']) C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:53
[13-Jun-2025 20:23:39 UTC] Admin directory accessed: /buffet_booking_mvc/admin/
[13-Jun-2025 20:24:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:24:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:24:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:24:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:24:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:24:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:24:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:11 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:11 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:25:41 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:25:41 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:26:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:26:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:26:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:26:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:26:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:26:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:27:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:27:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:27:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:27:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[13-Jun-2025 20:27:21 UTC] Main router handling admin route: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

[13-Jun-2025 20:27:21 UTC] Session in main router: Array
(
    [cart_count] => 0
    [csrf_token] => 697792f05f6036b269958c7641e680772ec68cf0162dbaed4f78c888950fc646
    [user_id] => 1
    [first_name] => Adminn
    [last_name] => User
    [user_email] => admin@buffet.com
    [user_role] => manager
    [is_logged_in] => 1
    [user] => Array
        (
            [id] => 1
            [first_name] => Adminn
            [last_name] => User
            [full_name] => Adminn User
            [email] => admin@buffet.com
            [role] => manager
        )

    [success] => ng nhp thnh cng!
)

handleAdminRoute called with segments: Array
(
    [0] => admin
    [1] => dashboard
    [2] => stats
)

Session user_id: 1
Session user_role: manager
Role check result: pass
Authentication check - role: manager, authenticated: yes
Admin authentication passed - proceeding with routing
[14-Jun-2025 05:51:19 UTC] PHP Fatal error:  Uncaught Error: Call to undefined method AuthController::index() in C:\wamp64\www\buffet_booking_mvc\index.php:860
Stack trace:
#0 C:\wamp64\www\buffet_booking_mvc\index.php(110): handleCustomerRoute('auth', 'forgot-password', NULL)
#1 C:\wamp64\www\buffet_booking_mvc\index.php(36): routeRequest(Array)
#2 {main}
  thrown in C:\wamp64\www\buffet_booking_mvc\index.php on line 860
[14-Jun-2025 06:48:14 UTC] PHP Warning:  Undefined array key "confirm_password" in C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php on line 133
[14-Jun-2025 06:48:14 UTC] PHP Stack trace:
[14-Jun-2025 06:48:14 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[14-Jun-2025 06:48:14 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'register']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[14-Jun-2025 06:48:14 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'register', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[14-Jun-2025 06:48:14 UTC] PHP   4. AuthController->register() C:\wamp64\www\buffet_booking_mvc\index.php:859
[14-Jun-2025 06:48:14 UTC] PHP   5. AuthController->handleRegister() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:38
[14-Jun-2025 06:51:16 UTC] PHP Warning:  Undefined array key "confirm_password" in C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php on line 133
[14-Jun-2025 06:51:16 UTC] PHP Stack trace:
[14-Jun-2025 06:51:16 UTC] PHP   1. {main}() C:\wamp64\www\buffet_booking_mvc\index.php:0
[14-Jun-2025 06:51:16 UTC] PHP   2. routeRequest($segments = [0 => 'auth', 1 => 'register']) C:\wamp64\www\buffet_booking_mvc\index.php:36
[14-Jun-2025 06:51:16 UTC] PHP   3. handleCustomerRoute($page = 'auth', $action = 'register', $param = NULL) C:\wamp64\www\buffet_booking_mvc\index.php:110
[14-Jun-2025 06:51:16 UTC] PHP   4. AuthController->register() C:\wamp64\www\buffet_booking_mvc\index.php:859
[14-Jun-2025 06:51:16 UTC] PHP   5. AuthController->handleRegister() C:\wamp64\www\buffet_booking_mvc\controllers\AuthController.php:38
